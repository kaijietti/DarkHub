<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <link href="styles/index.css" rel="stylesheet"/>
        <link href="styles/personlinfo.css" rel="stylesheet"/>
        <script src="./scripts/jquery.js"></script>
        <script src = "./scripts/index.js"></script>
        <script src="./scripts/personalinfo.js"></script>
    </head>
    <body>
        <div id="nav">

            <div class="webicon">
                <label class="webicon-label">DarkHub</label>
                <svg t="1565075730526" class="webicon-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4152" width="200" height="200">
                    <path d="M928 538.656h-128v-177.344l86.08-82.176a32 32 0 1 0-44.192-46.304L750.624 320H273.376L182.08 232.864a31.968 31.968 0 1 0-44.16 46.272L224 361.344v177.344H96a32 32 0 0 0 0 64h128V640c0 52.96 14.304 102.592 39.232 145.216L137.92 904.864a32 32 0 1 0 44.192 46.304l119.712-114.272a287.104 287.104 0 0 0 178.208 89.344V544a32 32 0 0 1 64 0v382.24a287.424 287.424 0 0 0 178.208-89.344l119.712 114.272a32.032 32.032 0 0 0 44.192-46.304l-125.344-119.648A287.04 287.04 0 0 0 800 640v-37.344h128a32 32 0 0 0 0-64z" p-id="4153" fill="#e6e6e6"></path>
                    <path d="M672 240a160 160 0 0 0-320 0v21.344h320V240z" p-id="4154" fill="#e6e6e6"></path>
                </svg>
            </div>

            <ul class="nav_menu">
                <li>
                    <a href="/index" class="three-d">
                        Home
                        <span class="box">
                            <span class="front">Home</span>
                            <span class="back">Home</span>
                        </span>
                    </a>
                </li>

                <li>
                    <a href="#" class="three-d">
                        Course
                        <span class="box">
                            <span class="front">Course</span>
                            <span class="back">Course</span>
                        </span>
                    </a>
                    <ul>
                        <li>
                            <a href="#" class="three-d">
                                已结束
                                <span class="box">
                                    <span class="front">已结束</span>
                                    <span class="back">已结束</span>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="three-d">
                                未结束
                                <span class="box">
                                    <span class="front">未结束</span>
                                    <span class="back">未结束</span>
                                </span>
                            </a>
                        </li>
                    </ul>
                </li>

                <li>
                    <a href="#" class="three-d">
                        MOJ
                        <span class="box">
                            <span class="front">MOJ</span>
                            <span class="back">MOJ</span>
                        </span>
                    </a>
                </li>

                <li>
                    <a href="#" class="three-d">
                        <span class="box">
                            <span class="front">
                                <div class="user">
                                    <img src="imags/usericon.png" width="40px" height="40px" id='usericon'/>
                                </div>
                            </span>
                            <span class="back" id = 'username_text'>
                                username
                            </span>
                        </span>
                    </a>
                    <ul>
                        <li>
                            <a href="./personalinfo" class="three-d">
                                 Infomation
                                <span class="box">
                                    <span class="front">Infomation</span>
                                    <span class="back">Infomation</span>
                                 </span>
                            </a>
                        </li>
                    </ul>
                    <ul>
                        <li>
                            <a href="#" class='three-d' onclick='logout()'>
                                Log out
                                <span class = 'box'>
                                    <span class = 'front'>Log out</span>
                                    <span class = 'back'>Log out</span>
                                </span>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>

        </div>
        <!--add personal information here-->
        
        <div class="info-section">
            <h1>Your information</h1>
            <div class="border"></div>
            <form class="info-form" action="personalinfo.html" method="post">

                <div class="info-form-user">
                    <img class="info-form-usericon" src="imags/usericon.png" id='infoUserIcon'>
                    <div class="info-form-white"></div>
                    <div class="change-box">
                        <svg t="1565101619122" class="change-box-icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2713" width="200" height="200"><path d="M261.12 165.76l136.32 136.32-95.36 95.36-136.32-136.32a239.36 239.36 0 0 0 295.68 339.84l256 256a98.56 98.56 0 1 0 139.52-139.52l-256-256a239.36 239.36 0 0 0-339.84-295.68z" fill="#212121" p-id="2714"></path></svg>
                     </div>
                </div>  
                
                <input type="text" class="info-form-text" placeholder="Your name" disabled/>
                <input type="email" class="info-form-text" placeholder="Your email"/>
                <input type="text" class="info-form-text" placeholder="Your phone"/>
                <textarea class="info-form-text" placeholder="Your address"></textarea>
                <div class="info-form-btn">Change</div>
            </form>
        </div>
        <!--
            功能说明：
            1.
            头像修改在弹窗中进行，可以先跳过。2019.08.06
            2.
            进入页面显示未更改的个人信息，
            按change按钮进入修改模式
            同时按钮文字改为Done，h1改为changing information
            在修改完后按下即是一次修改。
        -->
        <footer>
            <a href="/contact_us">Contact Us</a>
        </footer>

    </body>
    <script>
        window.onload = () => {
            let username = login();
            if(!username){
                window.location.href = '/';
            }
            else{
                document.getElementById('username_text').innerHTML = username;
                document.getElementById('username').value = username;
                let src = getUserIcon();
                document.getElementById('usericon').src = src;
                document.getElementById('infoUserIcon').src = src;
                // post username and get its infomation:
                // let url = '';
                // $.ajax({
                //     data:{
                //         username:username
                //     },
                //     url:url,
                //     type:'POST',
                //     dataType:'text',
                //     success:function(result){   //假设返回一个JSON字符串
                //         let username = '';
                //         let address = '';
                //         let phone = '';
                //         let sex = '';

                //         var reg1 = new RegExp('&','g');
                //         var reg2 = new RegExp('=','g');

                //         result = '{' + result + '}';
                //         result = result.replace(reg1,'","').replace(reg2,'":"');
                //         parse_result = JSON.parse(result);

                //         username = parse_result.username;
                //         address = parse_result.address;
                //         phone = parse_result.phone;
                //         sex = parse_result.sex;

                //         document.getElementById('username').innerHTML = username;
                //         document.getElementById('address').innerHTML = address;
                //         document.getElementById('phone').innerHTML = phone;
                //         document.getElementById('sex').innerHTML = sex;
                //     },
                //     error:function(xhr,txtstatus,errthrow){
                //         console.log(errthrow);
                //     }
                // })
            }
        }
    </script>
</html>